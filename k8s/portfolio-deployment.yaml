apiVersion: v1
kind: ConfigMap
metadata:
  name: portfolio-configmap
  namespace: portfolio
data:
  info.json: |
    {
      "home": {
        "firstName":"Yoav",
        "lastName": "Harel",
        "initials": "yh", 
        "position": "a junior DevOps / Backend Developer",
        "selfPortrait": "./images/self.png", 
        "gradient": "-webkit-linear-gradient(135deg, rgb(0,255,164), rgb(166,104,255))",
        "baseColor": "rgb(0,255,164)",
        "miniBio": [ 
          {
            "emoji": "ðŸ›µ",
            "text": "motorbike rider"
          },
          {
            "emoji": "ðŸŒŽ",
            "text": "based in IL"
          },
          {
            "emoji": "ðŸ’¼",
            "text": "Developer Support Engineer at JFrog"
          },
          {
            "emoji": "ðŸ“§",
            "text": "yoavbkk@gmail.com"
          }
        ],
        "socials": [
          {
            "link": "https://github.com/HarelYoav",
            "icon": "fa fa-github",
            "label": "github"
          },
          {
            "link": "https://www.linkedin.com/in/yoav-harel-9134591bb/",
            "icon": "fa fa-linkedin",
            "label": "linkedin"
          }
        ]
      },
      "portfolio": [ 
        {
          "title": "Battle Ship - Online",
          "live": "http://yoavharel.com/battle-ship", 
          "source": "https://github.com/HarelYoav/BattleShip-React-Multiplayer", 
          "image": "./images/battleShip.png",
          "tech": "TypeScript, NodeJS, Express, React, Socket.IO, Docker, Jenkins CD/CI, AWS"
        },
        {
          "title": "RupBnb",
          "live": "http://194.90.158.74/cgroup4/test2/tar5/Pages/index.html",
          "source": "https://github.com/HarelYoav/Airbnb-ServerSideExam",
          "image": "./images/rupBnb.png",
          "tech": "C# .net, JavaScript, JQuery, SQL, mssql, firebase"
        },
        {
          "title": "My Portfolio",
          "live": "https://yoavharel.com",
          "source": "https://github.com/HarelYoav/my-portfolio",
          "image": "./images/myPortfolio.png",
          "tech": "TypeScript, React, Mui Material, Docker, Jenkins CD/CI, AWS"
        },
        {
          "title": "Notes and Weather",
          "source": "https://github.com/HarelYoav/mx-dashboard",
          "image": "./images/mxDash.png",
          "tech": "JavaScript, NodeJS, Express, React, MongoDB, Redux"
        }
      ],
      "aboutMe": {
        "bio": "Hello, I'm Yoav Harel holding a Bachelor's degree in Computer Science.\nCurrently, I am working as a Developer Support at JFrog, and I'm looking for a full-time position as a junior DevOps / Backend Developer.\nI am passionate about coding, problem-solving, and collaborating with others.\nIn my free time, I enjoy hiking, motorcycle riding, and relaxing on the beach.",
        "experiences": [
          {"timeRange": "June, 2023 - Now", "role":"Developer Support Engineer", "location":"JFrog", "icon":"work"  },
          {"timeRange": "April, 2022 - May, 2023", "role":"Enterprise Support Tier 1", "location":"IBM", "icon":"work"  },
          {"timeRange": "2020 - 2023", "role":"Computer Sience Studnet", "location":"Ruppin Academic Center", "icon":"school"  }
        ],
        "skills": [
          {
            "name": "Python",
            "img": "./images/python.png"
          },
          {
            "name": "JavaScript",
            "img": "./images/js-logo.png"
          },
          {
            "name": "TypeScript",
            "img": "./images/ts-logo.png"
          },
          {
            "name": "C#",
            "img": "./images/cSharp.png"
          },
          {
            "name": "Java",
            "img": "./images/java.jpg"
          },
          {
            "name": "NodeJS",
            "img": "./images/nodej-js.png"
          },
          {
            "name": "React",
            "img": "./images/react-logo.png"
          },
          {
            "name": "Nginx",
            "img": "./images/nginx.png"
          },
          {
            "name": "Linux",
            "img": "./images/linux.png"
          },
          {
            "name": "Bash",
            "img": "./images/bash.png"
          },
          {
            "name": "Docker",
            "img": "./images/docker.png"
          },
          {
            "name": "Kubernetes",
            "img": "./images/Kubernetes.png"
          },
          {
            "name": "Git",
            "img": "./images/git-logo.png"
          },
          {
            "name": "Jenkins",
            "img": "./images/jenkins.png"
          },
          {
            "name": "AWS",
            "img": "./images/aws.png"
          },
          {
            "name": "MongoDB",
            "img": "./images/mongodb.png"
          }
        ]
      }
    }
---
apiVersion: apps/v1 
kind: Deployment
metadata:
  name: portfolio
  labels:
    app: portfolio
  namespace: portfolio
spec:
  selector:
    matchLabels:
      app: portfolio
  replicas: 3 
  template:
    metadata:
      labels:
        app: portfolio     
    spec:
      containers:
        - name: portfolio
          image: yoavdocker89/my-portfolio:12
          imagePullPolicy: Always
          ports:
          - containerPort: 80
          volumeMounts:
            - name: config-volume
              mountPath: /usr/share/nginx/html/config
          resources:
            requests:
              memory: "64Mi"
              cpu: "250m"
            limits:
              memory: "128Mi"
              cpu: "500m"
      volumes:
        - name: config-volume
          configMap:
            name: portfolio-configmap
      restartPolicy: Always
---
apiVersion: v1
kind: Service
metadata:
  name: portfolio
  labels:
    app: portfolio
  namespace: portfolio
spec:
  type: ClusterIP
  ports:
    - name: http
      protocol: TCP
      port: 80
  selector:
    app: portfolio
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    nginx.org/server-snippet: "proxy_ssl_verify off;"
    # kubernetes.io/ingress.class: public
    # nginx.ingress.kubernetes.io/rewrite-target: /$2
    # nginx.ingress.kubernetes.io/use-regex: "true"
  name: portfolio-ingress
  namespace: portfolio
spec:
  ingressClassName: nginx
  rules:
    - host: yoavharel.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: portfolio
                port:
                  number: 80
